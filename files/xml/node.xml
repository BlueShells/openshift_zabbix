<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>2.0</version>
    <date>2014-02-03T20:24:55Z</date>
    <groups>
        <group>
            <name>Templates</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template OpenShift Node</template>
            <name>Template OpenShift Node</name>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>Mcollective</name>
                </application>
                <application>
                    <name>OpenShift Node</name>
                </application>
                <application>
                    <name>SSH</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>Accept_node status</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>accept_node</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>365</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Accept node status.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>OpenShift Node</name>
                        </application>
                    </applications>
                    <valuemap/>
                </item>
                <item>
                    <name>Number of Cgroups processes</name>
                    <type>0</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>proc.num[cgrulesengd,root,,-g cgred]</key>
                    <delay>1800</delay>
                    <history>7</history>
                    <trends>365</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Check if cgroups is running.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>OpenShift Node</name>
                        </application>
                    </applications>
                    <valuemap/>
                </item>
                <item>
                    <name>Inactive Host</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>inactive_node</key>
                    <delay>0</delay>
                    <history>90</history>
                    <trends>365</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Node is active.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>OpenShift Node</name>
                        </application>
                    </applications>
                    <valuemap/>
                </item>
                <item>
                    <name>Mcollective Host Ping</name>
                    <type>2</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>mco_host_ping</key>
                    <delay>0</delay>
                    <history>7</history>
                    <trends>365</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Mcollective Host Ping</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Mcollective</name>
                        </application>
                    </applications>
                    <valuemap/>
                </item>
                <item>
                    <name>Number of mcollectived processes</name>
                    <type>0</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>proc.num[,,,/opt/rh/ruby193/root/usr/sbin/mcollectived.* --config=/opt/rh/ruby193/root/etc/mcollective/server.cfg]</key>
                    <delay>150</delay>
                    <history>7</history>
                    <trends>365</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description/>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>Mcollective</name>
                        </application>
                    </applications>
                    <valuemap/>
                </item>
                <item>
                    <name>Number of openshift-proxy-port processes</name>
                    <type>0</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>proc.num[haproxy,haproxy]</key>
                    <delay>120</delay>
                    <history>7</history>
                    <trends>365</trends>
                    <status>1</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Check for openshift-proxy-port process.</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>OpenShift Node</name>
                        </application>
                    </applications>
                    <valuemap/>
                </item>
                <item>
                    <name>Number of Watchman processes</name>
                    <type>0</type>
                    <snmp_community/>
                    <multiplier>0</multiplier>
                    <snmp_oid/>
                    <key>proc.num[watchman,root,,]</key>
                    <delay>120</delay>
                    <history>7</history>
                    <trends>365</trends>
                    <status>0</status>
                    <value_type>3</value_type>
                    <allowed_hosts/>
                    <units/>
                    <delta>0</delta>
                    <snmpv3_securityname/>
                    <snmpv3_securitylevel>0</snmpv3_securitylevel>
                    <snmpv3_authpassphrase/>
                    <snmpv3_privpassphrase/>
                    <formula>1</formula>
                    <delay_flex/>
                    <params/>
                    <ipmi_sensor/>
                    <data_type>0</data_type>
                    <authtype>0</authtype>
                    <username/>
                    <password/>
                    <publickey/>
                    <privatekey/>
                    <port/>
                    <description>Number of watchman processes</description>
                    <inventory_link>0</inventory_link>
                    <applications>
                        <application>
                            <name>OpenShift Node</name>
                        </application>
                    </applications>
                    <valuemap/>
                </item>
            </items>
            <discovery_rules/>
            <macros/>
            <templates>
                <template>
                    <name>Template App Apache Worker</name>
                </template>
                <template>
                    <name>Template File System Checks</name>
                </template>
            </templates>
            <screens/>
        </template>
    </templates>
    <triggers>
        <trigger>
            <expression>{Template OpenShift Node:accept_node.last(0)}&gt;0</expression>
            <name>Accept_node failures on {HOST.NAME}</name>
            <url>https://engineering.redhat.com/trac/Libra/wiki/SOP/Alerts/check_accept_node</url>
            <status>0</status>
            <priority>3</priority>
            <description>The oo-accept-node command has detected errors on this node.</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{Template OpenShift Node:proc.num[haproxy,haproxy].max(#2)}=0</expression>
            <name>Service openshift-proxy-port is not running on {HOST.NAME}</name>
            <url/>
            <status>1</status>
            <priority>2</priority>
            <description>Service openshift-proxy-port is not running.</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{Template OpenShift Node:proc.num[cgrulesengd,root,,-g cgred].last(0)}=0</expression>
            <name>[Heal] cgred is not running on {HOST.NAME}</name>
            <url/>
            <status>0</status>
            <priority>2</priority>
            <description>Cgroups is not running.  Trying a restart.</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{Template OpenShift Node:mco_host_ping.last(#1)}#0&amp;{Template OpenShift Node:mco_host_ping.last(#2)}#0</expression>
            <name>[Heal] Mcollective Host Ping failed on {HOST.NAME}</name>
            <url/>
            <status>0</status>
            <priority>4</priority>
            <description>Mcollective ping failed to {HOST.NAME}.  Verify mcollective service is running on this host.</description>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{Template OpenShift Node:proc.num[,,,/opt/rh/ruby193/root/usr/sbin/mcollectived.* --config=/opt/rh/ruby193/root/etc/mcollective/server.cfg].last(#1)}#1&amp;{Template OpenShift Node:proc.num[,,,/opt/rh/ruby193/root/usr/sbin/mcollectived.* --config=/opt/rh/ruby193/root/etc/mcollective/server.cfg].last(#2)}#1</expression>
            <name>[Heal] Mcollective is not running on {HOST.NAME}</name>
            <url/>
            <status>0</status>
            <priority>4</priority>
            <description/>
            <type>0</type>
            <dependencies/>
        </trigger>
        <trigger>
            <expression>{Template OpenShift Node:proc.num[watchman,root,,].last(#1)}#1&amp;{Template OpenShift Node:proc.num[watchman,root,,].last(#2)}#1</expression>
            <name>[Heal] Watchman is not running on {HOST.NAME}</name>
            <url/>
            <status>0</status>
            <priority>2</priority>
            <description>Watchman is not running on {HOST.NAME} attempting a restart of libra-watchman</description>
            <type>0</type>
            <dependencies/>
        </trigger>
    </triggers>
</zabbix_export>
